<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{admin/layout}">

<body>
<main layout:fragment="content">

    <div class="page-heading">
        <div class="page-title">
            <div class="row align-items-center">
                <div class="col-12 col-md-6">
                    <h3>Blog Redaktəsi</h3>
                    <p class="text-subtitle text-muted">Mövcud blog yazısının məlumatlarını redaktə edin.</p>
                </div>
                <div class="col-12 col-md-6 text-end">
                    <a th:href="@{/admin/blogs}" class="btn btn-secondary">
                        <i class="bi bi-arrow-left"></i> Geri qayıt
                    </a>
                </div>
            </div>
        </div>

        <section class="section mt-4">
            <div class="card">
                <div class="card-header">
                    <h5>Blog redaktə formu</h5>
                </div>
                <div class="card-body">
                    <form th:action="@{'/admin/blogs/edit/' + ${blogId}}" method="post" th:object="${blog}">
                        <div class="row">

                            <!-- Başlıq -->
                            <div class="col-md-12 mb-3">
                                <label class="form-label fw-bold">Başlıq</label>
                                <input type="text" th:field="*{title}" class="form-control"
                                       placeholder="Blog başlığı" required>
                            </div>

                            <!-- Şəkil URL -->
                            <div class="col-md-12 mb-3">
                                <label class="form-label fw-bold">Şəkil URL</label>
                                <input type="text" th:field="*{imagePath}" class="form-control"
                                       placeholder="Şəklin linki"
                                       oninput="document.getElementById('preview').src=this.value"
                                       required>

                                <!--  Şəkil önbaxış -->
                                <div class="mt-3 text-center">
                                    <img id="preview" th:attr="src=${blog.imagePath}"
                                         style="max-width: 250px; max-height: 200px; border-radius: 8px;"
                                         alt="Şəkil önbaxış">
                                </div>
                            </div>

                            <!-- Məzmun -->
                            <div class="col-md-12 mb-3">
                                <label class="form-label fw-bold">Məzmun</label>
                                <textarea th:field="*{content}" id="editor" class="form-control"
                                          rows="10"></textarea>
                            </div>

                            <!-- Yenilə düyməsi -->
                            <div class="col-md-12 text-end mt-3">
                                <button type="submit" class="btn btn-primary">
                                    <i class="bi bi-save"></i> Dəyişiklikləri yadda saxla
                                </button>
                                <a th:href="@{/admin/blogs}" class="btn btn-light">Ləğv et</a>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </section>
    </div>

    <!-- CKEditor JS -->
    <script src="https://cdn.ckeditor.com/4.22.1/standard/ckeditor.js"></script>
    <script>
        CKEDITOR.replace('editor');
    </script>

</main>
</body>
</html>
